# Base worker name (used for local development only - DO NOT DEPLOY)
# Always use --env production when deploying
name = "lite-adserver-ui"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
# OpenNext generates the worker entry point
main = ".open-next/worker.js"

# Static assets configuration - OpenNext output
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

[observability]
[observability.logs]
enabled = true
invocation_logs = true

# Default vars (used for local development and inherited by environments)
[vars]
NEXT_PUBLIC_AD_SERVER_URL = "http://localhost:8787"

# Production environment - this is the only worker that should be deployed
# Deploys as: lite-adserver-ui-production
[env.production]
name = "lite-adserver-ui-production"
vars = { NODE_ENV = "production", NEXT_PUBLIC_AD_SERVER_URL = "https://api.affset.com" }

[env.preview]
vars = { NODE_ENV = "development", NEXT_PUBLIC_AD_SERVER_URL = "http://localhost:8787" }